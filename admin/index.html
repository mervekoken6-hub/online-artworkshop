<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Admin Panel â€¢ Online Art Workshop</title>

<style>
:root{
  --bg1:#0b1220; --bg2:#05060a; --card:rgba(12,18,32,.95);
  --soft:rgba(255,255,255,.1); --muted:rgba(255,255,255,.75);
  --a1:#60a5fa; --a2:#a78bfa; --ok:#34d399; --bad:#fb7185;
}
*{box-sizing:border-box}
body{
  margin:0;font-family:system-ui;background:radial-gradient(circle at top,var(--bg1),var(--bg2));
  color:#fff;min-height:100vh;padding:32px 12px;display:flex;justify-content:center;
}
.wrap{width:100%;max-width:1100px}
.card{background:var(--card);border-radius:18px;padding:20px;margin-bottom:18px}
.btn{padding:10px 16px;border:none;border-radius:12px;
  background:linear-gradient(135deg,var(--a1),var(--a2));color:#fff;cursor:pointer}
.btn.ghost{background:transparent;border:1px solid var(--soft)}
input{padding:10px;border-radius:10px;border:1px solid var(--soft)}
.hidden{display:none}
.status{font-size:13px;margin-top:6px}
.ok{color:var(--ok)} .bad{color:var(--bad)}
table{width:100%;border-collapse:collapse;margin-top:12px;font-size:13px}
th,td{padding:8px;border-bottom:1px solid var(--soft)}
</style>
</head>

<body>
<div class="wrap">
<h1>ðŸ§™ Admin Panel â€¢ Online Art Workshop</h1>

<div class="card" id="loginCard">
  <input type="password" id="password" placeholder="Åžifre">
  <button class="btn" onclick="login()">GiriÅŸ</button>
  <div class="status bad hidden" id="loginErr">Åžifre yanlÄ±ÅŸ</div>
</div>

<div class="card hidden" id="panelCard">
  <button class="btn ghost" onclick="loadData()">KayÄ±tlarÄ± YÃ¼kle</button>
  <input id="apiUrl" placeholder="Apps Script API URL">
  <button class="btn ghost" onclick="saveApi()">Kaydet</button>
  <div class="status" id="apiStatus"></div>

  <table>
    <thead>
      <tr>
        <th>KayÄ±t Tarihi</th><th>Ad Soyad</th><th>E-posta</th>
        <th>Telefon</th><th>Tarih</th><th>Seans</th>
        <th>Ãœcret</th><th>Not</th><th>Dil</th><th>Durum</th>
      </tr>
    </thead>
    <tbody id="tableBody"></tbody>
  </table>
</div>
</div>

<script>
const ADMIN_PASSWORD="cadimagic2025";
const LS_AUTH="admin_auth_ok", LS_API="admin_api_url";

function login(){
  if(password.value===ADMIN_PASSWORD){
    localStorage.setItem(LS_AUTH,"1"); showPanel();
  } else loginErr.classList.remove("hidden");
}
function showPanel(){
  loginCard.classList.add("hidden");
  panelCard.classList.remove("hidden");
}
function saveApi(){
  localStorage.setItem(LS_API,apiUrl.value.trim());
  apiStatus.textContent="API kaydedildi"; apiStatus.className="status ok";
}

async function loadData(){
  const url=localStorage.getItem(LS_API);
  if(!url){apiStatus.textContent="API URL girilmedi";apiStatus.className="status bad";return;}
  apiStatus.textContent="YÃ¼kleniyor...";
  try{
    const res=await fetch(url,{mode:"cors"});
    const json=await res.json();
    render(json.rows||[]);
    apiStatus.textContent="BaÄŸlandÄ± (kayÄ±t yoksa boÅŸ gÃ¶rÃ¼nÃ¼r)";
    apiStatus.className="status ok";
  }catch(e){
    apiStatus.textContent="API ulaÅŸÄ±lamÄ±yor";
    apiStatus.className="status bad";
  }
}

function render(rows){
  tableBody.innerHTML="";
  rows.forEach(r=>{
    const tr=document.createElement("tr");
    r.forEach(c=>{
      const td=document.createElement("td");
      td.textContent=c; tr.appendChild(td);
    });
    tableBody.appendChild(tr);
  });
}

if(localStorage.getItem(LS_AUTH)==="1") showPanel();
apiUrl.value=localStorage.getItem(LS_API)||"";
</script>
</body>
</html>
